<div class="container px-4">
  <h1 class="mb-5 font-bold text-xl">
    Register New Repository
  </h1>
  <mat-stepper [linear]="true" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup" (submit)="registerProject()">
        <ng-template matStepLabel>Register Project</ng-template>
        <div class="grid grid-cols-2 gap-4">
          <mat-form-field>
            <mat-label>Project Name</mat-label>
            <input matInput formControlName="name">
          </mat-form-field>
          <mat-form-field>
            <mat-label>URL Repository</mat-label>
            <input matInput formControlName="url">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Language</mat-label>
            <mat-select formControlName="language_id">
              @if (languages()) {
                @for (lang of languages(); track lang.id) {
                  <mat-option [value]="lang.id">
                    {{ lang.name }}
                  </mat-option>
                }
              }
            </mat-select>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Language Version</mat-label>
            <mat-select formControlName="language_version_id">
              @if (selectedLanguageVersions()) {
                @for (version of selectedLanguageVersions(); track version.id) {
                  <mat-option [value]="version.id">{{ version.version }}</mat-option>
                }
              }
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <button mat-flat-button matStepperNext>Register</button>
        </div>
      </form>
    </mat-step>
    <mat-step [stepControl]="secondFormGroup">
      <ng-template matStepLabel>Evaluate Code</ng-template>
      <form [formGroup]="secondFormGroup" (submit)="inspectProject()">
        <div class="grid grid-cols-2 gap-4">
          <mat-form-field>
            <mat-label>Branch</mat-label>
            <input formControlName="branch" matInput>
          </mat-form-field>
          <mat-form-field>
            <mat-label>Quality Rules Group</mat-label>
            <mat-select formControlName="rule_group_id">
              @if(rulesGroups()) {
                @for (rulesGroup of rulesGroups(); track rulesGroup.id) {
                  <mat-option [value]="rulesGroup.id">{{ rulesGroup.name }}</mat-option>
                }
              }
            </mat-select>
          </mat-form-field>
        </div>
        <div>
          <!-- <button mat-button matStepperPrevious>Back</button> -->
          <button mat-flat-button matStepperNext>Evaluate</button>
        </div>
      </form>
    </mat-step>
    <mat-step>
      <ng-template matStepLabel>Result</ng-template>
      <div class="mx-auto p-6 flex flex-col md:flex-row items-start md:items-center">

        <!-- Sección de texto -->
        <div class="w-full md:w-1/2 space-y-3">
          <div>
            <span class="font-semibold">Lines of Code Evaluated:</span> 30
          </div>
          <div>
            <span class="font-semibold">Score:</span> 400
          </div>
          <div>
            <span class="font-semibold">Amount of Files:</span> 40
          </div>
          <div>
            <span class="font-semibold">Branch Name:</span> main
          </div>
          <div>
            <span class="font-semibold">Project Name:</span> Proyecto de programación intermedia
          </div>
          <div>
            <span class="font-semibold">Evaluation Date:</span> 03/11/2024
          </div>
        </div>

        <!-- Sección de imagen (la "gráfica") -->
        <div class="w-full md:w-1/2 flex justify-center mt-6 md:mt-0">
          <img
            src="https://placehold.co/600x400"
            alt="Gráfica de ejemplo"
            class="max-w-full h-auto"
          />
        </div>
      </div>
      <!-- <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="stepper.reset()">Reset</button>
      </div> -->
    </mat-step>
  </mat-stepper>
</div>
